# OSI

## Определение

**OSI (Open System Interconnection)** — это эталонная модель сетевых взаимодействий. 

Эта модель весь процесс передачи данных делит на `7 уровней`. 
Каждый уровень отвечает за определённые задачи, но не говорит, как эти задачи решать. 
Это позволяет разработчикам создавать новые протоколы или технологии, которые работают на определённом уровне 
решают определённые задачи и не задумываться о других задачах. 
Другие задачи решаются на других уровнях, на которых работают другие протоколы и технологии.

## Схема

![image](https://github.com/user-attachments/assets/873a3aa6-6c95-4316-abfb-459b47f32be1)

## Уровни (от высокого к низкому)

### 7 уровень — прикладной

На нём `работают пользовательские приложения`, установленные на компьютере, сервере или телефоне.

Пример: клиент электронной почты и почтовый сервер, программный телефон и сервер ip-телефонии, браузер и web-сервер.

Протоколы: DNS, HTTP, POP3, IMAP, SMTP, SIP, FTP, CIFS, NFS, DHCP и подобные.

Передающиеся данные на этом уровне называются `сообщениями`.

### 6 уровень — представления

На этом уровне происходит `преобразование данных`. 
Данные должны быть представлены в определённом виде, чтобы принимающее их приложение смогло эти данные обработать.
Здесь, теоретически, данные могут преобразовываться в разные форматы, например GIF или MP4. 
Или данные могут быть зашифрованы и расшифрованы.

Пример: шифрование или сжатие. 

Протоколы: SSL и TLS.

### 5 уровень — сеансовый

Этот уровень отвечает за `создание и уничтожение сеансов связи`. 
Чтобы сеанс установился и поддерживался, на этом же уровне работает согласование кодеков.

### 4 уровень — транспортный

Этот уровень обеспечивает `передачу данных по сети`. 
То есть данные ещё не передаются физически, но уже происходит договорённость, как данные будут передаваться.

На этом уровне сообщение делится на `сегменты` (если TCP) или на `дейтаграммы` (если UDP). 
В качестве служебной информации к каждому сегменту или дейтаграмме добавляется `сетевой порт` источника и назначения. 
Такие порты прослушивают процессы на хостах (компьютерах, серверах или телефонах).

Протоколы: TCP и UDP.

### 3 уровень — сетевой

Этот уровень тоже отвечает за `передачу данных`. Задача этого уровня — `ip-адресация` и `маршрутизация`.

На этом уровне пришедший сверху сегмент или дейтаграмма делится на `пакеты`. 
А в качестве служебной информации к каждому пакету добавляется `ip-адреса` отправителя и получателя.
Именно на этом уровне происходит маршрутизация пакетов.

Протоколы маршрутизации: BGP, OSPF, RIP, EIGRP

Протоколы: ICMP (с его помощью работает PING), IP (который вводит ip-адреса).

`IP-адрес` — это сетевой адрес устройства в Интернете.

А главное устройство, работающее на этом уровне — `Маршрутизатор (Router)`.

### 2 уровень — канальный

Этот уровень разбивает пакеты, пришедшие с сетевого уровня на `кадры` (Frame). 
В качестве дополнительной информации каждому кадру назначаются `физические адреса` 
(mac-адреса) отправителя и получателя.

`MAC-адрес` — это физический адрес устройства в одном широковещательном домене.

Помимо физической адресации, этот уровень отвечает за `обнаружение и исправление ошибок`. 
То есть каждый кадр проверяется на ошибки и происходит попытка исправления ошибок разными способами 
(а иногда и не происходит).

На этом уровне работают `коммутаторы` (Switch) и `мосты` (Bridge). 
Эти устройства передают кадры определённому получателю, а не всем.

На этом уровне работают протоколы: CDP, PPP, MPLS. 
Также здесь обитает технология `Ethernet`, которая занимает этот уровень и более низкий уровень.

### 1 уровень — физический

На этом уровне происходит разбивка кадров на `биты`. Затем биты кодируются в `сигналы`, 
а сигналы передаются по среде передачи. 
По проводам можно передавать сигналы с помощью `электрического тока` или `света`. 
Или можно передавать сигналы с помощью `радио-волн`.

Среди технологий, работающих на этом уровне, можно выделить `Ethernet`. 
Он описывает, как сигналы должны кодироваться, передаваться по проводам и так далее. 
Ещё на этом уровне работают: `Bluetooth` и `Wi-Fi`.

Сетевые устройства, которые здесь работают, это: `концентраторы` (Hub) и `повторители` (Repeater). 
Эти устройства работают с сигналами не вникая в логику передачи. 
Так как здесь нет никаких адресов, то сигнал просто передаётся с одного порта на другой.

# Модель TCP/IP

## Определение

Эталонная модель сетевых взаимодействий OSI — это теоретическая модель, которая хорошо описывает, 
как сетевые устройства должны общаться друг с другом. 
Но на практике, разрабатывая сетевые протоколы, вместо OSI используют другую модель сетевых взаимодействий — TCP/IP.

Помимо модели сетевых взаимодействий TCP/IP есть стек протоколов TCP/IP.
В этот стек входит множество сетевых протоколов, которые хорошо встраиваются в одноименную модель.

Модель TCP/IP делит процесс передачи данных на `4 уровня` вместо 7 уровней OSI.

## Схема

![image](https://github.com/user-attachments/assets/a0a31218-0bd1-49cb-a588-c98d3f725949)

## Уровни (от высокого к низкому)

### 4 уровень — прикладной

Здесь `работают приложения`, установленные на компьютере, телефоне или сервере.
Здесь же происходит `согласование данных` (шифрование, сжатие, выбор формата данных и выбор кодеков) 
и `установка сеансов связи`.

Протоколы: SIP, DHCP, HTTP и подобные.

### 3 уровень — транспортный

Этот уровень не отличается от транспортного уровня в модели OSI. 

Протоколы: TCP и UDP. 

А в качестве служебной информации выступают сетевые порты.

### 2 уровень — интернет (межсетевой)

Интернет состоит из множества локальных сетей, объединённых между собой маршрутизаторами.

Этот уровень не отличается от сетевого уровня модели OSI. 

Здесь `реализуется ip-адресация и маршрутизация`, за счет введения ip-адресов.

### 1 уровень — сетевых интерфейсов

Этот уровень вобрал в себя физический и канальный уровни модели OSI. 
Это аппаратный уровень, на котором работают `сетевые карты, коммутаторы, повторители, концентраторы`.

Также на этом уровне `находятся среды передачи информации, провода, радиоволны`. 
Но не просто среды, а технологии, которые эти среды используют: `Ethernet`, `Wi-Fi`, `DSL`, `Bluetooth`.

Также на этом уроне `можно обнаруживать или исправлять ошибки`, возникшие при передаче данных.

# Инкапсуляция и декапсуляция

Данные, переходя с верхнего уровня на нижний, обрабатываются и к ним добавляется служебная информация. 
Процесс добавления служебной информации более низкого уровня называется — `инкапсуляция`.

Обратный процесс, когда данные переходят на более высокий уровень, 
при этом служебные данные более низкого уровня отбрасываются называется — `декапсуляция`.

tags:
#network #models #osi #tsp #ip
